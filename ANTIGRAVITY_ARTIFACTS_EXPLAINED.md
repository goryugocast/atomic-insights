# Antigravityにおける「アーティファクト（Artifacts）」の概念と構造

アーティファクトは、Antigravity（以下「エージェント」）がプロジェクトの永続的な文脈を維持するために生成・管理する、非揮発性のドキュメント群です[^1]。単なるファイルとの最大の違いは、エージェントがその内容を「自身の記憶の一部」として直接認識・管理している点にあります。

## 1. アーティファクトの定義
エージェントにとってのアーティファクトは、以下の3つの役割を果たします。

1.  **文脈の固定**: 長時間の会話で薄れていく情報を、結晶化して保存する[^2]。
2.  **合意の記録**: ユーザーとの間で決定した「設計指針」や「タスクの進捗」を客観的に記録する。
3.  **自己参照**: 開発中にエージェント自身が自分の「過去の決定」を読み返し、矛盾のない行動をとるための基準とする。

## 2. アーティファクトの構造（メタデータ）
アーティファクトは通常のファイル書き出しとは異なり、エージェント内部で「メタデータ[^3]」と共に管理されます。以下にその実態（ソース構造）を示します。

### 技術的なデータ構造（例）
エージェントがアーティファクトを生成する際、以下のような構造の命令がシステムに送られます。

```json
{
  "TargetFile": "/path/to/artifact.md",
  "IsArtifact": true,
  "ArtifactMetadata": {
    "ArtifactType": "implementation_plan",
    "Summary": "プロジェクトの核心的な設計方針と実装フェーズの定義。"
  },
  "CodeContent": " (ここにマークダウンの内容が含まれる) "
}
```

この `ArtifactMetadata` が付与されることで、エージェントはこのファイルを「単なるテキスト」ではなく「プロジェクトの重要な一部」として特別視し、会話の開始時に優先的にロードするようになります。

## 3. 保存場所と永続性
アーティファクトは、ローカルマシンの隠しディレクトリ[^4] 内にある各プロジェクト固有の「Brain（脳）」ディレクトリに格納されます。

*   **保存先**: `~/.gemini/antigravity/brain/[プロジェクトID]/`
*   **同期**: エージェントが何かを学んだり、計画を変更したりするたびに、この領域の情報が動的に書き換え（上書き）され、常に最新の「状態」が保たれます。

## 4. エージェントによる「判断」の基準
エージェントが何をアーティファクトにするかは、以下の基準に基づきます。

| 基準 | 理由 |
| :--- | :--- |
| **反復性** | 同じ指示を二度受ける必要がある情報か？ |
| **複雑性** | 会話の要約だけでは失われるほど詳細なロジックか？ |
| **重要性** | ユーザーの固有のこだわり（スタイル）が含まれているか？ |

[^1]: ここで言う「非揮発性」とは、会話のデータ量が増えて古い履歴が要約・圧縮（トークン制限への対応）されても、内容が変化せず直接参照され続ける特性を指します。
[^2]: エージェントの記憶は、会話履歴（短期記憶）とアーティファクト（長期記憶）の二層構造になっています。
[^3]: データそのものではなく、そのデータが「何であるか（種類、要旨、最終更新日など）」を説明する付随情報のことです。
[^4]: `.gemini` フォルダは、ユーザーディレクトリの直下に作成される、Antigravity専用の設定および記憶保持領域です。

---
**本ドキュメントの意義**
この説明自体もまた、アーティファクトとして「エージェントの記憶」に定着させることで、将来エージェントが自身の仕組みについて問われた際、正確に本概念を再構築できるように設計されています。

- 2026-01-13: 初版作成
